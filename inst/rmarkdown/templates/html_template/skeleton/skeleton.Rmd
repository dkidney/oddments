---
pagetitle: "asfd"
title: "| Title line 1 \n| Title line 2 \n"
subtitle: "Subtitle"
author: "Darren Kidney"
date: '`r format(Sys.Date(), "%d %b %Y")`'
output: 
  oddments:::html_template:
  # html_document:
    # code_folding: hide
    # css: '`r system.file("rmarkdown/templates/html_template/resources/html_template.css", package = "oddments")`'
    # df_print: kable # default, kable, tibble or paged
    # fig_width: 7
    # fig_height: 5
    fig_caption: true
    # fig_retina: 1
    highlight: haddock
    # includes:
      # in_header: hello_world.html
      #	before_body: hello_world.html
      #	after_body: hello_world.html
    keep_md: true
    # lib_dir: libs
    mathjax: default
    number_sections: true
    # md_extensions: -autolink_bare_uris+hard_line_breaks
    # pandoc_args: [
      # "--title-prefix", "Foo",
      # "--id-prefix", "Bar"
    # ]
    self_contained: true
    smart: false
    # template: quarterly_report.html
    # theme: cosmo
    toc: true
    toc_depth: 4
    # toc_float:
      #	collapsed: false
      #	smooth_scroll: true
editor_options:
  chunk_output_type: console
runtime: shiny
---

*******************************************************************************

## Preamble {-}

```{r config, include=FALSE}
# code evaluation -----
knitr::opts_chunk$set(
    eval = TRUE
)
# text results -----
knitr::opts_chunk$set(
    echo = TRUE,
    results = 'hold',
    collapse = FALSE,
    warning = FALSE,
    message = FALSE
)
# code decoration -----
knitr::opts_chunk$set(
    tidy = "styler" ,
    comment = "# ",
    background = '#F7F7F7'
)
# plots -----
golden_ratio = (1 + sqrt(5)) / 2
knitr::opts_chunk$set(
    fig.path = "figures/fig_",
    fig.show = "hold",
    dev = "svg", # svg looks better on web pages
    # dev = c("png", "jpeg"),
    dev.args = list(
        family = "Avenir",
        pointsize = 11
    ),
    dpi = 96, # dpi * inches = pixels
    fig.width = 7,
    # fig.height = 7 / golden_ratio,
    fig.asp = 1 / golden_ratio, # fig.height = fig.width * fig.asp
    # fig.dim = c(7, 7 / golden_ratio),
    out.width = "75%",
    fig.retina = 1,
    fig.align = "center"
)
ggplot2::theme_set(
    ggplot2::theme_minimal(
        base_family = knitr::opts_chunk$get("dev.args")$family,
        base_size = knitr::opts_chunk$get("dev.args")$pointsize,
        base_line_size = 0.5
    )
)
par(
    family = knitr::opts_chunk$get("dev.args")$family
)
# engines -----
knitr::opts_chunk$set(
    engine.path = list(
        python = "/usr/local/Cellar/python/3.7.3/bin/python3"
    )
)
stopifnot(file.exists(knitr::opts_chunk$get("engine.path")$python))
# python -----
# requires reticulate
knitr::opts_chunk$set(
    python.reticulate = TRUE
)
reticulate::use_python(knitr::opts_chunk$get("engine.path"))
# paged tables -----
# when using `df_print: paged` in yaml header
knitr::opts_chunk$set(
    max.print = 10, # The number of rows to print.
    rows.print = 10, # The number of rows to display.
    cols.print = 10, # The number of columns to display.
    cols.min.print = 10, # The minimum number of columns to display.
    pages.print = 10, # The number of pages to display under page navigation.
    paged.print = TRUE, # When set to FALSE turns off paged tables.
    rownames.print = TRUE # When set to FALSE turns off row names.
)
# option templates -----
knitr::opts_template$set(
    cat_file = list(eval = TRUE, echo = FALSE, results = "asis")
)
cat_file = function(x){
    y = readLines(x, warn = FALSE) %>% paste0(collapse = "\n")
    paste0("```", tools::file_ext(x), "\n", y, "\n```")
}
# package options -----
# see ?opts_knit
knitr::opts_knit$set(
    aliases = c(h = 'fig.height', w = 'fig.width'),
    width = 80
)
# working directory -----
if (interactive()) {
    setwd(fs::path_dir(rstudioapi::getActiveDocumentContext()$path))
}
```

```{css, include=FALSE}
/* additional css code can go here */
ul {
  list-style-type: square;
}
.MathJax_Display {
  padding: 0.5em;
  background-color: #eaeff3
}
```

```{r, r_setup}
suppressPackageStartupMessages({
  library(fs)
  library(magrittr)
  library(tidyverse)
})
options(
    knitr.table.format = "html", # dont need this if using library(kableExtra)
    stringsAsFactors = FALSE
)
```

*******************************************************************************

# Heading 1

## Heading 2

### Heading 3

#### Heading 4

##### Heading 5

*******************************************************************************

# Accessing knitr options

```{r}
knitr::opts_chunk$get("dev.args")
```

*******************************************************************************

# Tables

| Tables        | Are           | Cool  |
| :------------ |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |

## Default df_print

```{r}
mtcars %>% head(10)
```

## DT::datatable

```{r}
mtcars %>% DT::datatable()
```

## KableExtra

```{r}
mtcars %>% 
  knitr::kable(
    format = "html",
    digits = 5,
    row.names = TRUE,
    caption = "A caption",
    format.args = list(big.mark = ",")
  ) %>% 
  kableExtra::kable_styling(
    full_width = FALSE,
    bootstrap_options = c("striped", "condensed"),
    position = "center",
    fixed_thead = TRUE,
    font_size = 11
  ) %>%
  kableExtra::row_spec(
    0,
    bold = TRUE,
    color = "white",
    background = "#337ab7"
  ) %>%
  kableExtra::column_spec(
    1,
    bold = TRUE
  ) %>% 
  kableExtra::scroll_box(
    height = "500px",
    width = "100%",
    box_css = "border: 5px;"
  )
```


*******************************************************************************

# Figures

```{r pressure, fig.align="default", fig.show="hold", out.width=c("40%", "60%")}
mtcars %>% ggplot(aes(mpg)) + geom_histogram()
mtcars %>% ggplot(aes(disp)) + geom_histogram()
mtcars %>% ggplot(aes(drat)) + geom_histogram()
mtcars %>% ggplot(aes(qsec)) + geom_histogram()
```


*******************************************************************************

# Link IDs

I get 10 times more traffic from [Google][1] than from [Yahoo][2] or [MSN][3]. 

[1]: http://google.com/ "Google" 
[2]: http://search.yahoo.com/ "Yahoo Search" 
[3]: http://search.msn.com/ "MSN Search"  


*******************************************************************************

# Images

## markdown

![markdown (can't resize)](https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg)

## markdown using id

![markdown using id (can't resize)][id]

[id]:https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg "title"

## HTML

<center>
  <figure>
    <img
    src="https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg" 
    width="25%",
    >
    <figcaption>HTML</figcaption>
  </figure>
</center>

## knitr::include_graphics

```{r, fig.cap="knitr::include_graphics (can resize)", out.width='25%', echo=FALSE}
knitr::include_graphics("https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg")
```

*******************************************************************************

# Tabs {.tabset}

## mpg

```{r, echo=FALSE}
mtcars %>% ggplot(aes(mpg)) + geom_histogram()
```

******************************************************************************************

## disp

```{r, echo=FALSE}
mtcars %>% ggplot(aes(disp)) + geom_histogram()
```

*******************************************************************************

# Python

```{r, results='hold'}
python_engine = knitr::opts_chunk$get("engine.path")$python %T>% print
eval_python = file.exists(python_engine) %T>% print
```

```{python, python.reticulate=FALSE, eval=eval_python}
import sys
print(sys.version)
```

```{python, python.reticulate=FALSE, eval=eval_python}
import os
print(os.getcwd())
```


*******************************************************************************

# Shiny

```{r eruptions, echo=FALSE}
sliderInput(
  'binwidth', label = 'Bin width:',
  min = 0.1, max = 10, value = 1
)

renderPlot({
    mtcars %>% 
        ggplot(aes(mpg)) +
        geom_histogram(binwidth = as.numeric(input[["binwidth"]]))
}
)
```


*******************************************************************************

```{css}
#myselector1 {
   color: red;
}

.myselector2 {
   font-size: 1.2em;
}
```

*******************************************************************************

# Next Steps {#myselector1 .myselector2}

Hello.

Hello again.


*******************************************************************************

# Appendix: Useful links {-}

https://bookdown.org/yihui/rmarkdown

<https://rmarkdown.rstudio.com>.

<https://yihui.name/knitr/options/>

<https://rmarkdown.rstudio.com/html_document_format.html>

<https://rmarkdown.rstudio.com/word_document_format.html>

<https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors>

*******************************************************************************

# Appendix: Print a file {-}

```{r, code=readLines("~/.Rprofile"), opts.label='cat_file'}
```

*******************************************************************************

# Appendix: Session info {-}

```{r session_info, include=TRUE, echo=TRUE, results='markup', comment=""}
devtools::session_info()
```

